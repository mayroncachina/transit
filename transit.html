
<!DOCTYPE html>

<html>

  <head>

    <title>Transit - Sistema de Autuações</title>

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">

    <meta charset="utf-8">

    <style>

      #map-canvas {

		width:100%;

        height: 300px;

        margin: 0px;

		margin-top:20px;

        padding: 0px;

      }

    </style>

	    

    <link rel="stylesheet" href="css/reset.css" type="text/css"/>

    <link rel="stylesheet" href="css/template.css" type="text/css"/>

    

    <link rel="stylesheet" href="rmm-css/responsivemobilemenu.css" type="text/css"/>

    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

    <script type="text/javascript" src="rmm-js/responsivemobilemenu.js"></script>
    <script type="text/javascript" src="cordova.js"></script>

    <!--

    Include the maps javascript with sensor=true because this code is using a

    sensor (a GPS locator) to determine the user's location.

    See: https://developers.google.com/maps/documentation/javascript/tutorial#Loading_the_Maps_API

    -->

    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true"></script>



    <script>

// Note: This example requires that you consent to location sharing when

// prompted by your browser. If you see a blank space instead of the map, this

// is probably because you have denied permission for location sharing.



var map;



function initialize() {

  var mapOptions = {

    zoom: 15,
    zoomControl: false,
    scaleControl: false,
    scrollwheel: false,
    disableDoubleClickZoom: true,

  };

  map = new google.maps.Map(document.getElementById('map-canvas'),

      mapOptions);



  // Try HTML5 geolocation

  if(navigator.geolocation) {

    navigator.geolocation.getCurrentPosition(function(position) {

      var pos = new google.maps.LatLng(position.coords.latitude,

                                       position.coords.longitude);



      var infowindow = new google.maps.InfoWindow({

        map: map,

        position: pos,

        content: 'Você está aqui!'

      });



      map.setCenter(pos);

    }, function() {

      handleNoGeolocation(true);

    });

  } else {

    // Browser doesn't support Geolocation

    handleNoGeolocation(false);

  }

}



function handleNoGeolocation(errorFlag) {

  if (errorFlag) {

    var content = 'Error: The Geolocation service failed.';

  } else {

    var content = 'Error: Your browser doesn\'t support geolocation.';

  }



  var options = {

    map: map,

    position: new google.maps.LatLng(60, 105),

    content: content

  };



  var infowindow = new google.maps.InfoWindow(options);

  map.setCenter(options.position);

}



google.maps.event.addDomListener(window, 'load', initialize);



    </script>
 <script type="text/javascript" charset="utf-8">

    var pictureSource;   // picture source
    var destinationType; // sets the format of returned value

    // Wait for device API libraries to load
    //
    document.addEventListener("deviceready",onDeviceReady,false);

    // device APIs are available
    //
    function onDeviceReady() {
        pictureSource=navigator.camera.PictureSourceType;
        destinationType=navigator.camera.DestinationType;
        capturePhotoEdit();
    }

    // Called when a photo is successfully retrieved
    //
    function onPhotoDataSuccess(imageData) {
      // Uncomment to view the base64-encoded image data
      // console.log(imageData);

      // Get image handle
      //
      var smallImage = document.getElementById('smallImage');

      // Unhide image elements
      //
      smallImage.style.display = 'block';

      // Show the captured photo
      // The inline CSS rules are used to resize the image
      //
      smallImage.src = "data:image/jpeg;base64," + imageData;
    }

    function capturePhotoEdit() {
      // Take picture using device camera, allow edit, and retrieve image as base64-encoded string
      navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 20, allowEdit: true,
        destinationType: destinationType.DATA_URL });
    }


    // Called if something bad happens.
    //
    function onFail(message) {
      alert('Failed because: ' + message);
    }

    function postar(){
      $.post( "http:///sandbox.cachina.com.br/transit/index.php",{imagem:$("#smallImage").attr('src')}, function( data ) {
        alert( data );
      });
    }

    </script>
  </head>

  <body>

  

  <div class="header" align="center">

  	<img src="images/logo.png" width="200" />

  </div>

	<div class="rmm" style="top:20px">

	<ul>

        <li><a href='home.html'>Início</a></li>

        <li><a href='transit.html'>Registrar Infração</a></li>

        <li><a href='#'>Ver Infrações</a></li>

        <li><a href='exportar.html'>Exportar</a></li>

    	<li><a href='index.html'>Sair</a></li>

	</ul>

</div>

	<div class="main" align="center">

    

		<div id="map-canvas"></div>

        
        <br /><br />
        
    <img style="display:none;width:90%;height:260px;" id="smallImage" src="" />
    
    <br /><br />

        <form action="transit.html" method="post" class="basic-form">

            <label for="placa">Infrator:</label>

            <input type="text" placeholder="Ex: NNN-1234" name="placa"/>

            <input type="text" placeholder="Veículo" name="veiculo"/>

        </form>

        

        <br /><br />

        

         <form action="transit.html" method="post" class="basic-form">

            <label for="local">Dados da Infração:</label>

            <input type="text" placeholder="Logradouro" name="logradouro"/>

            <input type="text" placeholder="Número" name="numero"/>

            <input type="text" placeholder="Bairro" name="bairro"/>

            <select name="infracao">

            <option>Selecione...</option>

            <option value="1">Efetuar conversões em local proibido - Multa</option>

            <option value="2">Estacionar em fila dupla - Multa/remoção</option>

            <option value="3">Estacionar ao lado ou sobre o canteiro central, ilhas, refúgios ou canalizações - Multa/remoção</option>

            <option value="4">Seguir veículo em serviço de urgência com prioridade de passagem - Multa</option>

            <option value="5">Estacionar veículo no passeio ou sobre a faixa de pedestres - Multa</option>

            </select>

            <input type="hidden" name="msg" value="sucess" />

            <input type="button" class="btn btn-sm btn-success" onclick="postar()" value="ENVIAR"/>

        </form>

        

        

        

        <br />

        <br />

        <br />

        

	</div>

  </body>

</html>

